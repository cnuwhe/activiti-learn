# activiti与工作流相关的23张表
## 一览表
|表名|简介|具体作用|Service|
|:--:|:--:|:--:|:--:|
|act_re_deployment|部署对象表|||
|act_re_procdef|流程对象表|||
|act_ge_bytearray|资源文件表||
|act_ge_property|主键生成策略表||

## 详细介绍
### 1. act_re_deployment
+ **部署对象表**:表存放流程定义的显示名和部署时间，每部署一次增加一条记录

|ID_|NAME_|CATEGORY_|TENANT_ID_|DEPLOY_TIME_|
|:--:|:--:|:--:|:--:|:--:|
|1|helloworld入门程序|||2017-08-08 19:26:44.000|


### 2. act_re_procdef
+ **流程对象表**:存放流程定义的属性信息，部署每个新的流程定义都会在这张表中增加一条记录（当流程定义的key相同时，版本升级）

| ID_ | REV_ | CATEGORY_ | NAME_ | KEY_ | VERSION_ | DEPLOYMENT_ID_ | RESOURCE_NAME_ | DGRAM_RESOURCE_NAME_ | DESCRIPTION_ | HAS_START_FROM_KEY_ | HAS_GRAPHICAL_NOTATION_ | SUSPENSION_STATE_ | TENANT_ID_ |
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
|helloworld:1:4|1|http://www.activiti.org/test|helloworldProcess|helloworld|1|1|diagrams/helloworld.bpmn|diagrams/helloworld.png||0|1|1||

+ ***ID_*** :流程对象ID
+ ***NAME_*** ：流程对象的名称，即bpmn文件中的name属性值` <process id="helloworld" name="helloworldProcess">`
+ ***KEY_*** : 流程对象的Key 值，即bpmn文件中的id属性值 ` <process id="helloworld"...>`
+ ***DEPLOYMENT_ID_*** : 部署ID，与act_re_deployment中的“ID_”对应

### 3. act_ge_bytearray
+ **资源文件表**:存储流程定义相关的部署信息。(.bpmn和.png)。即流程定义文档的存入地，每部署一次就会增加两条记录：一条是关于bpmn规则文件的，另一条是图片。均以二进制形式存储在数据库中。


|ID_|REV_|NAME_|DEPLOYMNET_ID|BYTES_|GENERATED_|
|:--:|:--:|:--:|:--:|:--:|:--:|
|2|1|diagrams/helloworld.png|1|(BLOB)9.25KB|0|
|3|1|diagrams/helloworld.bpmn|1|(BLOB)3.28KB|0|

## 分类
### 1. 部署对象和流程定义相关的表
+ act_re_deployment : 部署对象表
+ act_re_procdef :流程对象表
+ act_ge_bytearray :资源文件表
+ act_ge_property： 主键生成策略表

当进行流程定义的部署时：
```java
ProcessEngine processEngine = ProcessEngines.getDefaultProcessEngine();
Deployment deployment = processEngine.getRepositoryService() //与流程定义和部署相关的Sevice
		             .createDeployment()   //创建一个部署对象
		             .name("helloworld入门程序")  //部署对象名称
		             .addClasspathResource("diagrams/helloworld.bpmn") //从classpath的资源中加载，一次只能加载一个文件
		             .addClasspathResource("diagrams/helloworld.png")
		             .deploy();  //完成部署

```

会操作数据库中的上述四张表。
